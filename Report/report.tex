\documentclass[a4paper, 12pt]{report}
\usepackage[left=2.5cm, right=2.5cm, top=3cm, bottom=3cm]{geometry}

\usepackage{xcolor}
\usepackage{amsmath, amssymb, amsfonts, amsthm}
\usepackage{url}
\usepackage{graphicx}

% use spanish template
% \usepackage[spanish]{babel}

% add bibliographics quotes
\usepackage{cite}

% insert source code in latex
\usepackage{listings}
\usepackage{color}

\definecolor{gray97}{gray}{.97}
\definecolor{gray75}{gray}{.75}
\definecolor{gray54}{gray}{.45}
\lstset{
  frame=Ltb,
  framerule=0pt,
  aboveskip=0.5cm,
  framextopmargin=3pt,
  framexleftmargin=0.4cm,
  framesep=0pt,
  rulesep=.4pt,
  backgroundcolor=\color{gray97},
  rulesepcolor=\color{black},
  %
  showstringspaces=true, columns=fullflexible, basicstyle=\ttfamily,
  stringstyle=\color{orange}, commentstyle=\color{gray45},
  keywordstyle=\bfseries\color{green!40!black},
  %
  numbers = left, numbersep=15pt, numberstyle=\tiny, numberfirstline=false,
  breaklines=true,
}

\lstnewenvironment{listing}[1][]
{\lstset{#1}\pagebreak[0]}{\pagebreak[0]}

\begin{document}
\title{\bf HULK Interpreter documentation}
\author{Eduardo Brito Labrada}
\date{\today}
\maketitle

\begin{abstract}
  In computer science, an {\bf interpreter} is a computer program that directly executes
  intructions written in a programming or scripting language, without requiring them previously
  to have been compiled into a machine language program. An interpreter generally uses one of the
  following strategies for program execution:

  \begin{enumerate}
    \item Parse the source code and perform behavior directly;
    \item Translate source code into some efficient intermediate representation or object code
          and inmediately execute that;
    \item Explicitly execute stored precompiled bytecode made by a compiler and matched with the
          interpreter Virtual Machine.
  \end{enumerate}

  In this project we will focus on the first strategies of those to create a interpreter for
    {\em Havana University Language for Kompilers (HULK)}. First we will define the basic syntax of the
  language and then we will show how the interpreter works in its entirety.
\end{abstract}

\tableofcontents

\newpage

\section*{Introduction}
\addcontentsline{toc}{section}{\bf Introduction}

HULK is a didactic, type-safe, object-oriented and incremental programming language. This is a simplified
version of HULK where we will be implementing a subset of this programming language. In particular, this
subset consists only of expressions that can be written on one line.

\subsection*{Expressions}
\addcontentsline{toc}{subsection}{Expressions}

HULK is a ultimately an expression-based language. Most of the syntactic constructions in HULK are expressions,
including the body of all functions, loops and other block of code.

The body of a program in HULK always end with a single global expression (and, if necessary, a final semicolon\footnote{In this
  version of HULK all expressions end with a single semicolon}) that serves as the entrypoint of the program.

\subsubsection*{Arithmetic expressions}
\addcontentsline{toc}{subsubsection}{Arithmetic expressions}

HULK defines three types of literal values: {\bf numbers}, {\bf strings} and {\bf booleans}. Numbers are $32$-bit floating-point
and support all basic arithmetic operations with the usual semantic: {\tt +} (addition), {\tt -} (subtraction), {\tt *} (multiplication),
{\tt \slash} (floating-point division), {\tt \^{}} (power), and parenthesized sub-expressions.

\subsubsection*{Strings}
\addcontentsline{toc}{subsubsection}{Strings}

Strings literals in HULK are defined within enclosed double-quotes ({\tt "}). A double-quote
can be included literally by escaping it ($\backslash${\tt "}), and other escaped characters
are $\backslash${\tt n} for line endings and $\backslash${\tt t} for tabs. Also, strings can
be concatenated with other strings (or the string representation of numbers) using the {\tt @}
operator.

\subsubsection*{Builtin math functions and constants}

Besides {\tt print}, HULK also provides some common mathematical operations encapsulated as
builtin functions with their usual semantic. The list of builtin math functions is the following:

\begin{itemize}
  \item {\tt sqrt(<value>)} computes the square root if a value.
  \item {\tt sin{<angle>}} computes the sine of an angle in radians.
  \item {\tt cos(<angle>)} computes the cosine of an angle in radians.
  \item {\tt exp(<value>)} computes the value of {\tt e} raised to a value.
  \item {\tt log(<base>, <value>)} computes the logarithm of a value in a given base.
  \item {\tt rand()} returns a random uniform number between $0$ and $1$ (both inclusive).
\end{itemize}

Besides these functions, HULK also provides two globals constants: {\tt PI} and {\tt E} wich represent
the floating-point value of these mathematical constants.

As expected, functions can be nested in HULK (provided the use of types is consistent, but so far all we
care about is functions from numbers to numbers, so we can forget about types until later on).

More formally, function invocation is also an expression in HULK, so everywhere you expected an expression
you can also put a call to builtin function, and you can freely mix arithmetic expressions and mathematical
functions, as you would expected in any programming language.

\subsection*{Functions}
\addcontentsline{toc}{subsection}{Functions}

HULK also lets you define your own functions (of course!). A program in HULK can have an arbitrary number of functions
defined before the final global expressions.

A function's body is always an expression, hence all functions have a return value (and type), that is, the return
value (and type) of its body.

\subsubsection*{Inline functions}
\addcontentsline{toc}{subsubsection}{Inline functions}

The easiest way of define a function is the inline form. An inline function is defined by
an identifier followed by arguments between parenthesis, then the {\tt =>} symbol, and then a simple expression
(not an expression body) as body, ending with a final semicolon.

In HULK, all functions must be defined before the final global expression. All these functions live in a single
global namespace, hence is not allowed to repeat function names. Similarly, there are no overloads in HULK (at least in ``basic'' HULK).

Finally, the body of any function can use other functions, regardless of whether they are defined before or after the corresponding function.

And of course, inline functions (and any other type of functions) can call themselves recursively.

\end{document}